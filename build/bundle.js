!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r,o=function(){function t(t,e,n,r){this.templateElement=document.getElementById(t),this.hostElement=document.getElementById(e);var o=document.importNode(this.templateElement.content,!0);this.element=o.firstElementChild,r&&(this.element.id=r),this.attach(n)}return t.prototype.attach=function(t){this.hostElement.insertAdjacentElement(t?"afterbegin":"beforeend",this.element)},t}();function i(t){var e=!0;return t.required&&(e=e&&0!==t.value.toString().trim().length),null!=t.minLength&&"string"==typeof t.value&&(e=e&&t.value.length>=t.minLength),null!=t.maxLength&&"string"==typeof t.value&&(e=e&&t.value.length<=t.maxLength),null!=t.min&&"number"==typeof t.value&&(e=e&&t.value>=t.min),null!=t.max&&"number"==typeof t.value&&(e=e&&t.value<=t.max),e}function u(t,e,n){var r=n.value;return{configurable:!0,get:function(){return r.bind(this)}}}!function(t){t[t.Active=0]="Active",t[t.Finished=1]="Finished"}(r||(r={}));var a,c=function(t,e,n,r,o){this.id=t,this.title=e,this.description=n,this.people=r,this.status=o},l=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){var e=t.call(this)||this;return e.projects=[],e}return l(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.addProject=function(t,e,n){var o=new c(Math.random().toString(),t,e,n,r.Active);this.projects.push(o),this.updateListeners()},e.prototype.moveProject=function(t,e){var n=this.projects.find((function(e){return e.id===t}));n&&n.status!==e&&(n.status=e,this.updateListeners())},e.prototype.updateListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++){(0,e[t])(this.projects.slice())}},e}(function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){this.listeners.push(t)},t}()).getInstance(),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},d=function(t){function e(){var e=t.call(this,"project-input","app",!0,"user-input")||this;return e.titleInputElement=e.element.querySelector("#title"),e.descriptionInputElement=e.element.querySelector("#description"),e.peopleInputElement=e.element.querySelector("#people"),e.configure(),e}return p(e,t),e.prototype.configure=function(){this.element.addEventListener("submit",this.submitHandler)},e.prototype.renderContent=function(){},e.prototype.gatherUserInput=function(){var t=this.titleInputElement.value,e=this.descriptionInputElement.value,n=this.peopleInputElement.value,r={value:e,required:!0,minLength:5},o={value:+n,required:!0,min:1,max:5};return i({value:t,required:!0})&&i(r)&&i(o)?[t,e,+n]:void alert("Invalid input, please try again!")},e.prototype.clearInputs=function(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""},e.prototype.submitHandler=function(t){t.preventDefault();var e=this.gatherUserInput();if(Array.isArray(e)){var n=e[0],r=e[1],o=e[2];s.addProject(n,r,o),this.clearInputs()}},f([u],e.prototype,"submitHandler",null),e}(o),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},v=function(t){function e(e,n){var r=t.call(this,"single-project",e,!1,n.id)||this;return r.project=n,r.configure(),r.renderContent(),r}return h(e,t),Object.defineProperty(e.prototype,"persons",{get:function(){return 1===this.project.people?"1 person":this.project.people+" persons"},enumerable:!0,configurable:!0}),e.prototype.dragStartHandler=function(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"},e.prototype.dragEndHandler=function(t){},e.prototype.configure=function(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)},e.prototype.renderContent=function(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned.",this.element.querySelector("p").textContent=this.project.description},y([u],e.prototype,"dragStartHandler",null),y([u],e.prototype,"dragEndHandler",null),e}(o),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},j=function(t){function e(e){var n=t.call(this,"project-list","app",!1,e+"-projects")||this;return n.type=e,n.assignedProjects=[],n.configure(),n.renderContent(),n}return m(e,t),e.prototype.dragOverHandler=function(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))},e.prototype.dropHandler=function(t){var e=t.dataTransfer.getData("text/plain");s.moveProject(e,"active"===this.type?r.Active:r.Finished)},e.prototype.dragLeaveHandler=function(t){this.element.querySelector("ul").classList.remove("droppable")},e.prototype.configure=function(){var t=this;this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),s.addListener((function(e){var n=e.filter((function(e){return"active"===t.type?e.status===r.Active:e.status===r.Finished}));t.assignedProjects=n,t.renderProjects()}))},e.prototype.renderContent=function(){var t=this.type+"-projects-list";this.element.querySelector("ul").id=t,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"},e.prototype.renderProjects=function(){document.getElementById(this.type+"-projects-list").innerHTML="";for(var t=0,e=this.assignedProjects;t<e.length;t++){var n=e[t];new v(this.element.querySelector("ul").id,n)}},g([u],e.prototype,"dragOverHandler",null),g([u],e.prototype,"dropHandler",null),g([u],e.prototype,"dragLeaveHandler",null),e}(o);new d,new j("active"),new j("finished")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYmFzZS1jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9wcm9qZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJQcm9qZWN0U3RhdHVzIiwidGVtcGxhdGVJZCIsImhvc3RFbGVtZW50SWQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElkIiwidGhpcyIsInRlbXBsYXRlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJob3N0RWxlbWVudCIsImltcG9ydGVkTm9kZSIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiaWQiLCJhdHRhY2giLCJpbnNlcnRBdEJlZ2lubmluZyIsImluc2VydEFkamFjZW50RWxlbWVudCIsInZhbGlkYXRlIiwidmFsaWRhdGFibGVJbnB1dCIsImlzVmFsaWQiLCJyZXF1aXJlZCIsInRvU3RyaW5nIiwidHJpbSIsImxlbmd0aCIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm1pbiIsIm1heCIsImF1dG9iaW5kIiwiXyIsIl8yIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiY29uZmlndXJhYmxlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBlb3BsZSIsInN0YXR1cyIsInByb2plY3RTdGF0ZSIsInByb2plY3RzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIlByb2plY3RTdGF0ZSIsImFkZFByb2plY3QiLCJudW1PZlBlb3BsZSIsIm5ld1Byb2plY3QiLCJQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsIkFjdGl2ZSIsInB1c2giLCJ1cGRhdGVMaXN0ZW5lcnMiLCJtb3ZlUHJvamVjdCIsInByb2plY3RJZCIsIm5ld1N0YXR1cyIsInByb2plY3QiLCJmaW5kIiwicHJqIiwibGlzdGVuZXJzIiwibGlzdGVuZXJGbiIsInNsaWNlIiwiYWRkTGlzdGVuZXIiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImdhdGhlclVzZXJJbnB1dCIsImVudGVyZWRUaXRsZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwicGVvcGxlVmFsaWRhdGFibGUiLCJhbGVydCIsImNsZWFySW5wdXRzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImRlc2MiLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJkcmFnRW5kSGFuZGxlciIsInRleHRDb250ZW50IiwicGVyc29ucyIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwiZHJhZ092ZXJIYW5kbGVyIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wSGFuZGxlciIsInByaklkIiwiZ2V0RGF0YSIsIkZpbmlzaGVkIiwiZHJhZ0xlYXZlSGFuZGxlciIsInJlbW92ZSIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwiaW5uZXJIVE1MIiwicHJqSXRlbSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FB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T0FBTyxjQUd6QixZQUFBckMsVUFBQSxzQkFDQy9ELEtBQUtRLFFBQVF3RCxpQkFBaUIsV0FBWWhFLEtBQUsyRixpQkFDL0MzRixLQUFLUSxRQUFRd0QsaUJBQWlCLFlBQWFoRSxLQUFLbUcsa0JBQ2hEbkcsS0FBS1EsUUFBUXdELGlCQUFpQixPQUFRaEUsS0FBSytGLGFBRTNDNUQsRUFBYXVCLGFBQVksU0FBQ3RCLEdBQ3pCLElBQU1pRSxFQUFtQmpFLEVBQVNrRSxRQUFPLFNBQUFoRCxHQUN4QyxNQUFrQixXQUFkLEVBQUttQyxLQUNEbkMsRUFBSXBCLFNBQVd2QyxFQUFjbUQsT0FFOUJRLEVBQUlwQixTQUFXdkMsRUFBY3VHLFlBRXJDLEVBQUtSLGlCQUFtQlcsRUFDeEIsRUFBS0UscUJBSVAsWUFBQXJDLGNBQUEsV0FDQyxJQUFNc0MsRUFBWXhHLEtBQUt5RixLQUFJLGlCQUMzQnpGLEtBQUtRLFFBQVFvRCxjQUFjLE1BQU9sRCxHQUFLOEYsRUFDdkN4RyxLQUFLUSxRQUFRb0QsY0FBYyxNQUFPMkIsWUFDakN2RixLQUFLeUYsS0FBS2dCLGNBQWdCLGFBR3BCLFlBQUFGLGVBQVIsV0FDZ0JyRyxTQUFTQyxlQUNwQkgsS0FBS3lGLEtBQUksa0JBRU5pQixVQUFZLEdBQ25CLElBQXNCLFVBQUExRyxLQUFLMEYsaUJBQUwsZUFBdUIsQ0FBeEMsSUFBTWlCLEVBQU8sS0FDakIsSUFBSSxFQUFZM0csS0FBS1EsUUFBUW9ELGNBQWMsTUFBT2xELEdBQUlpRyxLQXJEeEQsR0FEQ2xGLEcsb0NBVUQsR0FEQ0EsRyxnQ0FVRCxHQURDQSxHLHFDQXVDRixFQXJFQSxDQUF5QyxHQ0x6QyxJQUFJLEVBQ0osSUFBSSxFQUFZLFVBQ2hCLElBQUksRUFBWSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvLyBDb21wb25lbnQgQmFzZSBDbGFzc1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFxuXHRUIGV4dGVuZHMgSFRNTEVsZW1lbnQsXG5cdFUgZXh0ZW5kcyBIVE1MRWxlbWVudFxuPiB7XG5cdHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudFxuXHRob3N0RWxlbWVudDogVFxuXHRlbGVtZW50OiBVXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0dGVtcGxhdGVJZDogc3RyaW5nLFxuXHRcdGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcblx0XHRpbnNlcnRBdFN0YXJ0OiBib29sZWFuLFxuXHRcdG5ld0VsZW1lbnRJZD86IHN0cmluZ1xuXHQpIHtcblx0XHR0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuXHRcdFx0dGVtcGxhdGVJZFxuXHRcdCkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnRcblx0XHR0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFRcblxuXHRcdGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCwgdHJ1ZSlcblx0XHR0aGlzLmVsZW1lbnQgPSBpbXBvcnRlZE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVVxuXHRcdGlmIChuZXdFbGVtZW50SWQpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5pZCA9IG5ld0VsZW1lbnRJZFxuXHRcdH1cblxuXHRcdHRoaXMuYXR0YWNoKGluc2VydEF0U3RhcnQpXG5cdH1cblxuXHRwcml2YXRlIGF0dGFjaChpbnNlcnRBdEJlZ2lubmluZzogYm9vbGVhbikge1xuXHRcdHRoaXMuaG9zdEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFxuXHRcdFx0aW5zZXJ0QXRCZWdpbm5pbmcgPyAnYWZ0ZXJiZWdpbicgOiAnYmVmb3JlZW5kJyxcblx0XHRcdHRoaXMuZWxlbWVudFxuXHRcdClcblx0fVxuXG5cdGFic3RyYWN0IGNvbmZpZ3VyZSgpOiB2b2lkXG5cdGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogdm9pZFxufVxuIiwiLy8gUHJvamVjdCBUeXBlXG5leHBvcnQgZW51bSBQcm9qZWN0U3RhdHVzIHtcblx0QWN0aXZlLFxuXHRGaW5pc2hlZFxufVxuXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyBpZDogc3RyaW5nLFxuXHRcdHB1YmxpYyB0aXRsZTogc3RyaW5nLFxuXHRcdHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxuXHRcdHB1YmxpYyBwZW9wbGU6IG51bWJlcixcblx0XHRwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXG5cdCkge31cbn1cbiIsIi8vIFZhbGlkYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGFibGUge1xuXHR2YWx1ZTogc3RyaW5nIHwgbnVtYmVyXG5cdHJlcXVpcmVkPzogYm9vbGVhblxuXHRtaW5MZW5ndGg/OiBudW1iZXJcblx0bWF4TGVuZ3RoPzogbnVtYmVyXG5cdG1pbj86IG51bWJlclxuXHRtYXg/OiBudW1iZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKSB7XG5cdGxldCBpc1ZhbGlkID0gdHJ1ZVxuXHRpZiAodmFsaWRhdGFibGVJbnB1dC5yZXF1aXJlZCkge1xuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwXG5cdH1cblx0aWYgKFxuXHRcdHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoICE9IG51bGwgJiZcblx0XHR0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ3N0cmluZydcblx0KSB7XG5cdFx0aXNWYWxpZCA9XG5cdFx0XHRpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoID49IHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoXG5cdH1cblx0aWYgKFxuXHRcdHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9IG51bGwgJiZcblx0XHR0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ3N0cmluZydcblx0KSB7XG5cdFx0aXNWYWxpZCA9XG5cdFx0XHRpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoIDw9IHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoXG5cdH1cblx0aWYgKFxuXHRcdHZhbGlkYXRhYmxlSW5wdXQubWluICE9IG51bGwgJiZcblx0XHR0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ251bWJlcidcblx0KSB7XG5cdFx0aXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pblxuXHR9XG5cdGlmIChcblx0XHR2YWxpZGF0YWJsZUlucHV0Lm1heCAhPSBudWxsICYmXG5cdFx0dHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInXG5cdCkge1xuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXhcblx0fVxuXHRyZXR1cm4gaXNWYWxpZFxufVxuIiwiLy8gYXV0b2JpbmQgZGVjb3JhdG9yXG5leHBvcnQgZnVuY3Rpb24gYXV0b2JpbmQoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcblx0Y29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlXG5cdGNvbnN0IGFkakRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcblx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0Y29uc3QgYm91bmRGbiA9IG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcylcblx0XHRcdHJldHVybiBib3VuZEZuXG5cdFx0fVxuXHR9XG5cdHJldHVybiBhZGpEZXNjcmlwdG9yXG59XG4iLCJpbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnXG5cbi8vIFByb2plY3QgU3RhdGUgTWFuYWdlbWVudFxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkXG5cbmNsYXNzIFN0YXRlPFQ+IHtcblx0cHJvdGVjdGVkIGxpc3RlbmVyczogTGlzdGVuZXI8VD5bXSA9IFtdXG5cblx0YWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcblx0XHR0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyRm4pXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSBleHRlbmRzIFN0YXRlPFByb2plY3Q+IHtcblx0cHJpdmF0ZSBwcm9qZWN0czogUHJvamVjdFtdID0gW11cblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFByb2plY3RTdGF0ZVxuXG5cdHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKVxuXHR9XG5cblx0c3RhdGljIGdldEluc3RhbmNlKCkge1xuXHRcdGlmICh0aGlzLmluc3RhbmNlKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5pbnN0YW5jZVxuXHRcdH1cblx0XHR0aGlzLmluc3RhbmNlID0gbmV3IFByb2plY3RTdGF0ZSgpXG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2Vcblx0fVxuXG5cdGFkZFByb2plY3QodGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgbnVtT2ZQZW9wbGU6IG51bWJlcikge1xuXHRcdGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcblx0XHRcdE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKSxcblx0XHRcdHRpdGxlLFxuXHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRudW1PZlBlb3BsZSxcblx0XHRcdFByb2plY3RTdGF0dXMuQWN0aXZlXG5cdFx0KVxuXHRcdHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KVxuXHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKClcblx0fVxuXG5cdG1vdmVQcm9qZWN0KHByb2plY3RJZDogc3RyaW5nLCBuZXdTdGF0dXM6IFByb2plY3RTdGF0dXMpIHtcblx0XHRjb25zdCBwcm9qZWN0ID0gdGhpcy5wcm9qZWN0cy5maW5kKChwcmo6IFByb2plY3QpID0+IHByai5pZCA9PT0gcHJvamVjdElkKVxuXG5cdFx0aWYgKHByb2plY3QgJiYgcHJvamVjdC5zdGF0dXMgIT09IG5ld1N0YXR1cykge1xuXHRcdFx0cHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXNcblx0XHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKClcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUxpc3RlbmVycygpIHtcblx0XHRmb3IgKGNvbnN0IGxpc3RlbmVyRm4gb2YgdGhpcy5saXN0ZW5lcnMpIHtcblx0XHRcdGxpc3RlbmVyRm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKClcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9iYXNlLWNvbXBvbmVudCdcbmltcG9ydCB7IFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gJy4uL3V0aWwvdmFsaWRhdGlvbidcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCdcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3Qtc3RhdGUnXG5cbi8vIFByb2plY3RJbnB1dCBDbGFzc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PFxuXHRIVE1MRGl2RWxlbWVudCxcblx0SFRNTEZvcm1FbGVtZW50XG4+IHtcblx0dGl0bGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnRcblx0ZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnRcblx0cGVvcGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoJ3Byb2plY3QtaW5wdXQnLCAnYXBwJywgdHJ1ZSwgJ3VzZXItaW5wdXQnKVxuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdCcjdGl0bGUnXG5cdFx0KSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cdFx0dGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0JyNkZXNjcmlwdGlvbidcblx0XHQpIGFzIEhUTUxJbnB1dEVsZW1lbnRcblx0XHR0aGlzLnBlb3BsZUlucHV0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0JyNwZW9wbGUnXG5cdFx0KSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cdFx0dGhpcy5jb25maWd1cmUoKVxuXHR9XG5cblx0Y29uZmlndXJlKCkge1xuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpXG5cdH1cblxuXHRyZW5kZXJDb250ZW50KCkge31cblxuXHRwcml2YXRlIGdhdGhlclVzZXJJbnB1dCgpOiBbc3RyaW5nLCBzdHJpbmcsIG51bWJlcl0gfCB2b2lkIHtcblx0XHRjb25zdCBlbnRlcmVkVGl0bGUgPSB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlXG5cdFx0Y29uc3QgZW50ZXJlZERlc2NyaXB0aW9uID0gdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudC52YWx1ZVxuXHRcdGNvbnN0IGVudGVyZWRQZW9wbGUgPSB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZVxuXG5cdFx0Y29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XG5cdFx0XHR2YWx1ZTogZW50ZXJlZFRpdGxlLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWVcblx0XHR9XG5cdFx0Y29uc3QgZGVzY3JpcHRpb25WYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XG5cdFx0XHR2YWx1ZTogZW50ZXJlZERlc2NyaXB0aW9uLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRtaW5MZW5ndGg6IDVcblx0XHR9XG5cdFx0Y29uc3QgcGVvcGxlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xuXHRcdFx0dmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRtaW46IDEsXG5cdFx0XHRtYXg6IDVcblx0XHR9XG5cblx0XHRpZiAoXG5cdFx0XHQhdmFsaWRhdGUodGl0bGVWYWxpZGF0YWJsZSkgfHxcblx0XHRcdCF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSB8fFxuXHRcdFx0IXZhbGlkYXRlKHBlb3BsZVZhbGlkYXRhYmxlKVxuXHRcdCkge1xuXHRcdFx0YWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4hJylcblx0XHRcdHJldHVyblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gW2VudGVyZWRUaXRsZSwgZW50ZXJlZERlc2NyaXB0aW9uLCArZW50ZXJlZFBlb3BsZV1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGNsZWFySW5wdXRzKCkge1xuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJ1xuXHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSAnJ1xuXHRcdHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJydcblx0fVxuXG5cdEBhdXRvYmluZFxuXHRwcml2YXRlIHN1Ym1pdEhhbmRsZXIoZXZlbnQ6IEV2ZW50KSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKVxuXHRcdGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KClcblx0XHRpZiAoQXJyYXkuaXNBcnJheSh1c2VySW5wdXQpKSB7XG5cdFx0XHRjb25zdCBbdGl0bGUsIGRlc2MsIHBlb3BsZV0gPSB1c2VySW5wdXRcblx0XHRcdHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjLCBwZW9wbGUpXG5cdFx0XHR0aGlzLmNsZWFySW5wdXRzKClcblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9iYXNlLWNvbXBvbmVudCdcbmltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AnXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnXG5cbi8vIFByb2plY3RJdGVtIENsYXNzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0SXRlbVxuXHRleHRlbmRzIENvbXBvbmVudDxIVE1MVUxpc3RFbGVtZW50LCBIVE1MTElFbGVtZW50PlxuXHRpbXBsZW1lbnRzIERyYWdnYWJsZSB7XG5cdHByaXZhdGUgcHJvamVjdDogUHJvamVjdFxuXG5cdGdldCBwZXJzb25zKCkge1xuXHRcdGlmICh0aGlzLnByb2plY3QucGVvcGxlID09PSAxKSB7XG5cdFx0XHRyZXR1cm4gJzEgcGVyc29uJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gYCR7dGhpcy5wcm9qZWN0LnBlb3BsZX0gcGVyc29uc2Bcblx0XHR9XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihob3N0SWQ6IHN0cmluZywgcHJvamVjdDogUHJvamVjdCkge1xuXHRcdHN1cGVyKCdzaW5nbGUtcHJvamVjdCcsIGhvc3RJZCwgZmFsc2UsIHByb2plY3QuaWQpXG5cdFx0dGhpcy5wcm9qZWN0ID0gcHJvamVjdFxuXG5cdFx0dGhpcy5jb25maWd1cmUoKVxuXHRcdHRoaXMucmVuZGVyQ29udGVudCgpXG5cdH1cblxuXHRAYXV0b2JpbmRcblx0ZHJhZ1N0YXJ0SGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XG5cdFx0ZXZlbnQuZGF0YVRyYW5zZmVyIS5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhpcy5wcm9qZWN0LmlkKVxuXHRcdGV2ZW50LmRhdGFUcmFuc2ZlciEuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJyAvLyBjaGFuZ2VzIHRoZSBjdXJzb3IgdG8gaW5kaWNhdGUgbW92ZVxuXHR9XG5cblx0QGF1dG9iaW5kXG5cdGRyYWdFbmRIYW5kbGVyKF86IERyYWdFdmVudCkge1xuXHRcdC8vIGNvbnNvbGUubG9nKCdEcmFnRW5kJylcblx0fVxuXG5cdGNvbmZpZ3VyZSgpIHtcblx0XHR0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKVxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhpcy5kcmFnRW5kSGFuZGxlcilcblx0fVxuXG5cdHJlbmRlckNvbnRlbnQoKSB7XG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gzJykhLnRleHRDb250ZW50ID0gdGhpcy5wZXJzb25zICsgJyBhc3NpZ25lZC4nXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AnKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb25cblx0fVxufVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2Jhc2UtY29tcG9uZW50J1xuaW1wb3J0IFByb2plY3RJdGVtIGZyb20gJy4vcHJvamVjdC1pdGVtJ1xuaW1wb3J0IHsgRHJhZ1RhcmdldCB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AnXG5pbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlJ1xuXG4vLyBQcm9qZWN0TGlzdCBDbGFzc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdExpc3QgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PlxuXHRpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xuXHRhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W11cblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6ICdhY3RpdmUnIHwgJ2ZpbmlzaGVkJykge1xuXHRcdHN1cGVyKCdwcm9qZWN0LWxpc3QnLCAnYXBwJywgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYClcblx0XHR0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBbXVxuXG5cdFx0dGhpcy5jb25maWd1cmUoKVxuXHRcdHRoaXMucmVuZGVyQ29udGVudCgpXG5cdH1cblxuXHRAYXV0b2JpbmRcblx0ZHJhZ092ZXJIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcblx0XHRpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSFcblx0XHRcdGxpc3RFbC5jbGFzc0xpc3QuYWRkKCdkcm9wcGFibGUnKVxuXHRcdH1cblx0fVxuXG5cdEBhdXRvYmluZFxuXHRkcm9wSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XG5cdFx0Y29uc3QgcHJqSWQgPSBldmVudC5kYXRhVHJhbnNmZXIhLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuXHRcdHByb2plY3RTdGF0ZS5tb3ZlUHJvamVjdChcblx0XHRcdHByaklkLFxuXHRcdFx0dGhpcy50eXBlID09PSAnYWN0aXZlJyA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxuXHRcdClcblx0fVxuXG5cdEBhdXRvYmluZFxuXHRkcmFnTGVhdmVIYW5kbGVyKF86IERyYWdFdmVudCkge1xuXHRcdGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIVxuXHRcdGxpc3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGFibGUnKVxuXHR9XG5cblx0Y29uZmlndXJlKCkge1xuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKVxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIpXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyb3BIYW5kbGVyKVxuXG5cdFx0cHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0czogUHJvamVjdFtdKSA9PiB7XG5cdFx0XHRjb25zdCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHByaiA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnR5cGUgPT09ICdhY3RpdmUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuQWN0aXZlXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuRmluaXNoZWRcblx0XHRcdH0pXG5cdFx0XHR0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSByZWxldmFudFByb2plY3RzXG5cdFx0XHR0aGlzLnJlbmRlclByb2plY3RzKClcblx0XHR9KVxuXHR9XG5cblx0cmVuZGVyQ29udGVudCgpIHtcblx0XHRjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID1cblx0XHRcdHRoaXMudHlwZS50b1VwcGVyQ2FzZSgpICsgJyBQUk9KRUNUUydcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyUHJvamVjdHMoKSB7XG5cdFx0Y29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG5cdFx0XHRgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgXG5cdFx0KSEgYXMgSFRNTFVMaXN0RWxlbWVudFxuXHRcdGxpc3RFbC5pbm5lckhUTUwgPSAnJ1xuXHRcdGZvciAoY29uc3QgcHJqSXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcblx0XHRcdG5ldyBQcm9qZWN0SXRlbSh0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQsIHByakl0ZW0pXG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgUHJvamVjdElucHV0IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWlucHV0J1xuaW1wb3J0IFByb2plY3RMaXN0IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3QnXG5cbm5ldyBQcm9qZWN0SW5wdXQoKVxubmV3IFByb2plY3RMaXN0KCdhY3RpdmUnKVxubmV3IFByb2plY3RMaXN0KCdmaW5pc2hlZCcpXG4iXSwic291cmNlUm9vdCI6IiJ9